(function(e){function t(t){for(var n,l,o=t[0],r=t[1],E=t[2],d=0,T=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&T.push(s[l][0]),s[l]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);c&&c(t);while(T.length)T.shift()();return a.push.apply(a,E||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var r=i[o];0!==s[r]&&(n=!1)}n&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},s={app:0},a=[];function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var E=0;E<o.length;E++)t(o[E]);var c=r;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-main",[i("v-container",[i("v-alert",{attrs:{border:"bottom","colored-border":"",type:"warning",elevation:"2"}},[e._v(" На данный момент модуль находится в альфа-версии, по поводу замечаний и предложений по доработкам обращайтесь на почту "),i("a",{attrs:{href:"mailto:mp@usstudio.ru"}},[e._v("mp@usstudio.ru")])]),i("h1",[e._v("Настройки модуля интеграции Битрикс24 с Ozon")]),i("OzoneSettings")],1)],1)],1)},a=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-switch",{attrs:{label:"Активность модуля"},model:{value:e.fields.MODULE_IS_ACTIVE,callback:function(t){e.$set(e.fields,"MODULE_IS_ACTIVE",t)},expression:"fields.MODULE_IS_ACTIVE"}})],1),i("div",{staticClass:"main-wrap"},[i("v-col",{attrs:{cols:"12"}},[i("h2",{staticClass:"mb-5"},[e._v("Соответствие статусов в ozon и в сделках Битрикс24")]),i("v-simple-table",[[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[i("v-toolbar-title",[e._v(" OZON ")])],1),i("th",{staticClass:"text-left"},[i("v-toolbar-title",[e._v(" Битрикс24 ")])],1)])]),i("tbody",[i("tr",[i("td",[e._v("Ожидает упаковки →")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},model:{value:e.fields.OZON_AWAITING_CONFIRMATION,callback:function(t){e.$set(e.fields,"OZON_AWAITING_CONFIRMATION",t)},expression:"fields.OZON_AWAITING_CONFIRMATION"}})],1)]),i("tr",[i("td",[e._v("Ожидает отгрузки←")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.OZON_AWAITING_SHIPMENT,callback:function(t){e.$set(e.fields,"OZON_AWAITING_SHIPMENT",t)},expression:"fields.OZON_AWAITING_SHIPMENT"}})],1)]),i("tr",[i("td",[e._v("Отменено←")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.OZON_CANCELED,callback:function(t){e.$set(e.fields,"OZON_CANCELED",t)},expression:"fields.OZON_CANCELED"}})],1)]),i("tr",[i("td",[e._v("Доставляется→")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.OZON_DELIVERING_STATUS,callback:function(t){e.$set(e.fields,"OZON_DELIVERING_STATUS",t)},expression:"fields.OZON_DELIVERING_STATUS"}})],1)]),i("tr",[i("td",[e._v("У водителя→")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.AT_THE_DRIVER,callback:function(t){e.$set(e.fields,"AT_THE_DRIVER",t)},expression:"fields.AT_THE_DRIVER"}})],1)]),i("tr",[i("td",[e._v("Доставлено→")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.OZON_DELIVERED,callback:function(t){e.$set(e.fields,"OZON_DELIVERED",t)},expression:"fields.OZON_DELIVERED"}})],1)]),i("tr",[i("td",[e._v("Ожидает решения спора→")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.CONTROVERSIAL,callback:function(t){e.$set(e.fields,"CONTROVERSIAL",t)},expression:"fields.CONTROVERSIAL"}})],1)]),i("tr",[i("td",[e._v("Не принят в сортировочном центре→")]),i("td",[i("v-autocomplete",{attrs:{items:e.category,label:"Стадия сделки","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.PENDING_DECISION,callback:function(t){e.$set(e.fields,"PENDING_DECISION",t)},expression:"fields.PENDING_DECISION"}})],1)])])]],2),i("a",{staticStyle:{"margin-top":"10px",display:"inline-block"},attrs:{href:"http://usstudio.ru/ozon/schema.png"}},[e._v("Схема обмена заказа по статусам")])],1),i("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[i("v-switch",{attrs:{label:"Не изменять статус в Б24 пока не изменится в ozon"},model:{value:e.fields.CHANGE_STATUS,callback:function(t){e.$set(e.fields,"CHANGE_STATUS",t)},expression:"fields.CHANGE_STATUS"}})],1)],1),i("div",{staticClass:"main-wrap"},[i("v-col",{attrs:{cols:"3"}},[i("v-text-field",{staticClass:"has-cursor",attrs:{label:"API key Ozon"},model:{value:e.fields.OZON_API_KEY,callback:function(t){e.$set(e.fields,"OZON_API_KEY",t)},expression:"fields.OZON_API_KEY"}})],1),i("v-col",{staticClass:"vert-center",attrs:{cols:"3"}},[i("a",{attrs:{href:"https://usstudio.ru/ozon/apiKey/",target:"_blank"}},[i("span",[e._v("Статья, где взять ApiKey")])])]),i("v-col",{attrs:{cols:"3"}},[i("v-text-field",{staticClass:"has-cursor",attrs:{label:"ClientId"},on:{keyup:e.enterOnlyNumber},model:{value:e.fields.CLIENT_ID,callback:function(t){e.$set(e.fields,"CLIENT_ID",t)},expression:"fields.CLIENT_ID"}})],1),i("v-col",{staticClass:"vert-center",attrs:{cols:"3"}},[i("a",{attrs:{href:"https://usstudio.ru/ozon/clientID/",target:"_blank"}},[i("span",[e._v("Статья, где взять ClientID")])])])],1)],1),i("v-row",[i("div",{staticClass:"main-wrap"},[i("v-col",{attrs:{cols:"12"}},[i("h2",[e._v("Частота выполнения скриптов")])]),i("v-col",{staticClass:"d-flex align-center justify-space-between",attrs:{cols:"5"}},[i("span",[e._v("Новые сделки")]),i("span",[e._v("каждые")])]),i("v-col",{staticClass:"has-cursor",attrs:{cols:"1"}},[i("v-text-field",{attrs:{"hide-details":"","single-line":""},on:{blur:function(t){return e.checkTime("EXECUTION_FREQUENCY_NEW_TRADES")}},model:{value:e.fields.EXECUTION_FREQUENCY_NEW_TRADES,callback:function(t){e.$set(e.fields,"EXECUTION_FREQUENCY_NEW_TRADES",t)},expression:"fields.EXECUTION_FREQUENCY_NEW_TRADES"}})],1),i("v-col",{attrs:{cols:"4"}},[i("v-select",{attrs:{items:e.time,"item-text":"name","item-value":"id"},on:{change:function(t){return e.checkTime("EXECUTION_FREQUENCY_NEW_TRADES")}},model:{value:e.fields.EXECUTION_FREQUENCY_NEW_TRADES_TIME,callback:function(t){e.$set(e.fields,"EXECUTION_FREQUENCY_NEW_TRADES_TIME",t)},expression:"fields.EXECUTION_FREQUENCY_NEW_TRADES_TIME"}})],1),i("v-col",{staticClass:"d-flex align-center justify-space-between",attrs:{cols:"5"}},[i("span",[e._v('Статусы "Доставляется" и "Спорные"')]),i("span",[e._v("каждые")])]),i("v-col",{staticClass:"has-cursor",attrs:{cols:"1"}},[i("v-text-field",{attrs:{"hide-details":"","single-line":""},on:{blur:function(t){return e.checkTime("EXECUTION_FREQUENCY_STATUSES")}},model:{value:e.fields.EXECUTION_FREQUENCY_STATUSES,callback:function(t){e.$set(e.fields,"EXECUTION_FREQUENCY_STATUSES",t)},expression:"fields.EXECUTION_FREQUENCY_STATUSES"}})],1),i("v-col",{attrs:{cols:"4"}},[i("v-select",{attrs:{items:e.time,"item-text":"name","item-value":"id"},on:{change:function(t){return e.checkTime("EXECUTION_FREQUENCY_STATUSES")}},model:{value:e.fields.EXECUTION_FREQUENCY_STATUSES_TIME,callback:function(t){e.$set(e.fields,"EXECUTION_FREQUENCY_STATUSES_TIME",t)},expression:"fields.EXECUTION_FREQUENCY_STATUSES_TIME"}})],1),i("v-col",{staticClass:"d-flex align-center justify-space-between",attrs:{cols:"5"}},[i("span",[e._v('Статусы "Доставлены"')]),i("span",[e._v("каждые")])]),i("v-col",{staticClass:"has-cursor",attrs:{cols:"1"}},[i("v-text-field",{attrs:{"hide-details":"","single-line":""},on:{change:function(t){return e.checkTime("EXECUTION_FREQUENCY_DELIVERIED")}},model:{value:e.fields.EXECUTION_FREQUENCY_DELIVERIED,callback:function(t){e.$set(e.fields,"EXECUTION_FREQUENCY_DELIVERIED",t)},expression:"fields.EXECUTION_FREQUENCY_DELIVERIED"}})],1),i("v-col",{attrs:{cols:"4"}},[i("v-select",{attrs:{items:e.time,"item-text":"name","item-value":"id"},model:{value:e.fields.EXECUTION_FREQUENCY_DELIVERIED_TIME,callback:function(t){e.$set(e.fields,"EXECUTION_FREQUENCY_DELIVERIED_TIME",t)},expression:"fields.EXECUTION_FREQUENCY_DELIVERIED_TIME"}})],1),i("v-col",{staticClass:"d-flex align-center justify-space-between",attrs:{cols:"5"}},[i("span",[e._v('Статусы "Доставляется"')]),i("span",[e._v("каждые")])]),i("v-col",{staticClass:"has-cursor",attrs:{cols:"1"}},[i("v-text-field",{attrs:{"hide-details":"","single-line":""},on:{change:function(t){return e.checkTime("ozon_delivering")}},model:{value:e.fields.ozon_delivering,callback:function(t){e.$set(e.fields,"ozon_delivering",t)},expression:"fields.ozon_delivering"}})],1),i("v-col",{attrs:{cols:"4"}},[i("v-select",{attrs:{items:e.time,"item-text":"name","item-value":"id"},model:{value:e.fields.ozon_delivering_TIME,callback:function(t){e.$set(e.fields,"ozon_delivering_TIME",t)},expression:"fields.ozon_delivering_TIME"}})],1),i("p",[e._v("*Минимальное время обмена 5 минут")])],1)]),i("v-row",[i("div",{staticClass:"main-wrap"},[i("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[i("h3",[e._v("Ответственный за сделки")])]),i("v-col",{attrs:{cols:"12"}},[i("v-select",{attrs:{items:e.people,label:"Ответственный","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.RESPONSIBLE,callback:function(t){e.$set(e.fields,"RESPONSIBLE",t)},expression:"fields.RESPONSIBLE"}})],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[i("h3",[e._v("Свойство товара в Б24, по которому будет сопоставление товаров из ozon с помощью артикула")])]),i("v-col",{attrs:{cols:"12"}},[i("v-select",{attrs:{items:e.productFields,label:"Свойство товара в Б24, по которому будет сопоставление товаров из ozon с помощью артикула","item-text":"name","item-value":"id",dense:"","single-line":""},scopedSlots:e._u([{key:"item",fn:function(t){return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]]}}]),model:{value:e.fields.PRODUCT_FIELD_CODE,callback:function(t){e.$set(e.fields,"PRODUCT_FIELD_CODE",t)},expression:"fields.PRODUCT_FIELD_CODE"}})],1)],1)]),i("v-row",[i("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[i("v-switch",{attrs:{label:"Создавать товар при отсутствии товара с нужным артикулом"},model:{value:e.fields.CREATE_PRODUCT,callback:function(t){e.$set(e.fields,"CREATE_PRODUCT",t)},expression:"fields.CREATE_PRODUCT"}})],1),i("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[i("v-switch",{attrs:{label:"Уведомлять при падении ozon"},model:{value:e.fields.NOTIFY_OZON_DROP,callback:function(t){e.$set(e.fields,"NOTIFY_OZON_DROP",t)},expression:"fields.NOTIFY_OZON_DROP"}})],1),i("v-col",{staticClass:"pt-0 pb-0 d-flex justify-center",attrs:{cols:"12"}},[i("div",{staticClass:"pa-5"},[i("v-btn",{attrs:{depressed:"",large:"",color:"primary",loading:this.isLoad,disabled:this.isLoad},on:{click:e.saveSettings}},[e._v(" Сохранить "),this.success?i("v-icon",[e._v("mdi-checkbox-marked-circle")]):e._e()],1)],1)])],1)],1)},o=[],r=(i("99af"),i("4160"),i("45fc"),i("d3b7"),i("ac1f"),i("466d"),i("5319"),i("159b"),i("b85c")),E=(i("96cf"),i("1da1")),c={beforeCreate:function(){var e=this,t=[];this.$loadScript("//api.bitrix24.com/api/v1/").then(Object(E["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.getCategory().then(function(){var i=Object(E["a"])(regeneratorRuntime.mark((function i(n){var s,a,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=Object(r["a"])(n),i.prev=1,s.s();case 3:if((a=s.n()).done){i.next=9;break}return l=a.value,i.next=7,e.getStatuses(l,t);case 7:i.next=3;break;case 9:i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](1),s.e(i.t0);case 14:return i.prev=14,s.f(),i.finish(14);case 17:e.category=t;case 18:case"end":return i.stop()}}),i,null,[[1,11,14,17]])})));return function(e){return i.apply(this,arguments)}}()).then((function(){console.log(e.category),e.category.unshift({id:"empty",name:"Выберете стадию сделки"})})),e.getUserList(),e.getProductsFields(),e.getEntity(),n=window.BX24.getScrollSize(),window.BX24.resizeWindow(n.scrollWidth,n.scrollHeight);case 6:case"end":return i.stop()}}),i)}))))},data:function(){return{category:[],time:[{name:"час.",id:"hour"},{name:"мин.",id:"min"}],people:[],productFields:[],fields:{MODULE_IS_ACTIVE:!0,OZON_AWAITING_CONFIRMATION:"",OZON_AWAITING_SHIPMENT:"",OZON_DELIVERED:"",OZON_DELIVERING_STATUS:"",OZON_CANCELED:"",OZON_API_KEY:"",EXECUTION_FREQUENCY_NEW_TRADES:"5",EXECUTION_FREQUENCY_NEW_TRADES_TIME:"min",EXECUTION_FREQUENCY_STATUSES:"1",EXECUTION_FREQUENCY_STATUSES_TIME:"hour",EXECUTION_FREQUENCY_DELIVERIED:"24",EXECUTION_FREQUENCY_DELIVERIED_TIME:"hour",ozon_delivering:"24",ozon_delivering_TIME:"hour",RESPONSIBLE:"",PRODUCT_FIELD_CODE:"",CREATE_PRODUCT:"",NOTIFY_OZON_DROP:"",CHANGE_STATUS:"",CLIENT_ID:"",CONTROVERSIAL:"",PENDING_DECISION:"",AT_THE_DRIVER:""},isLoad:!1,success:!1}},name:"OzoneSettins",methods:{cl:function(){},getCategory:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.abrupt("return",new Promise((function(e,i){window.BX24.callMethod("crm.dealcategory.default.get",{},(function(e){e.error()?console.error(e.error()):t.push(e.data())})),window.BX24.callMethod("crm.dealcategory.list",{order:{SORT:"ASC"},select:[]},(function(n){n.error()?i(n.error()):(n.data().forEach((function(e){t.push(e)})),e(t))}))})));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getStatuses:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:new Promise((function(e,n){window.BX24.callMethod("crm.dealcategory.stage.list",{id:t.ID},(function(s){if(s.error())n(s.error());else{var a=i.some((function(e){return e.id==t.ID}));a||i.push({header:"Направление сделки: "+t.NAME,id:t.ID});var l=s.data();l.forEach((function(e){i.push({name:e.NAME,id:e.STATUS_ID})})),e(l)}}))}));case 1:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),getUserList:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[],window.BX24.callMethod("user.get",{},(function(e){var i=e.data();i.forEach((function(e){t.push({name:"".concat(e.LAST_NAME," ").concat(e.NAME),id:e.ID})}))})),this.people=t;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getProductsFields:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[{name:"Внешний код",id:"XML_ID"},{name:"Символьный код",id:"CODE"}],window.BX24.callMethod("crm.product.property.list",{order:{SORT:"ASC"},filter:{}},(function(e){if(e.error())console.error(e.error());else{var i=e.data();i.forEach((function(e){t.push({name:e.NAME,id:"PROPERTY_"+e.ID})}))}})),this.productFields=t;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveSettings:function(){var e=this;this.isLoad=!this.isLoad;var t=Object.assign({},this.fields),i="ozonEntity";t.EXECUTION_FREQUENCY_STATUSES="".concat(this.fields.EXECUTION_FREQUENCY_STATUSES,"-").concat(this.fields.EXECUTION_FREQUENCY_STATUSES_TIME),t.EXECUTION_FREQUENCY_NEW_TRADES="".concat(this.fields.EXECUTION_FREQUENCY_NEW_TRADES,"-").concat(this.fields.EXECUTION_FREQUENCY_NEW_TRADES_TIME),t.EXECUTION_FREQUENCY_DELIVERIED="".concat(this.fields.EXECUTION_FREQUENCY_DELIVERIED,"-").concat(this.fields.EXECUTION_FREQUENCY_DELIVERIED_TIME),t.ozon_delivering="".concat(this.fields.ozon_delivering,"-").concat(this.fields.ozon_delivering_TIME);var n=new Promise((function(e){window.BX24.callMethod("entity.item.get",{ENTITY:i,SORT:{DATE_ACTIVE_FROM:"ASC",ID:"ASC"},FILTER:{}},(function(n){var s=n.data();if(1==s.length){var a=s[0].ID;window.BX24.callMethod("entity.item.update",{ENTITY:i,ID:a,PROPERTY_VALUES:t},(function(){e()}))}else window.BX24.callMethod("entity.item.add",{ENTITY:i,DATE_ACTIVE_FROM:new Date,NAME:"settings",PROPERTY_VALUES:t},(function(){e()}))}))}));n.then((function(){e.isLoad=!1,e.success=!0}))},getEntity:function(){var e="ozonEntity",t="",i=this;return window.BX24.callMethod("entity.item.get",{ENTITY:e,SORT:{DATE_ACTIVE_FROM:"ASC",ID:"ASC"},FILTER:{}},(function(e){var n=["EXECUTION_FREQUENCY_STATUSES","EXECUTION_FREQUENCY_NEW_TRADES","EXECUTION_FREQUENCY_DELIVERIED","ozon_delivering"],s=["NOTIFY_OZON_DROP","CHANGE_STATUS","CREATE_PRODUCT","MODULE_IS_ACTIVE"];t=e.data(),0!=t.length&&(t=t[0].PROPERTY_VALUES,n.forEach((function(e){var i=t[e].match(/min|hour/),n=t[e].match(/\d+/);t[e]=n[0],t[e+"_TIME"]=i[0]})),s.forEach((function(e){var i="true"==t[e];t[e]=i})),i.fields=t)}))},createEntity:function(){var e="ozonEntity",t=[{ENTITY:e,PROPERTY:"MODULE_IS_ACTIVE",NAME:"Активность модуля",TYPE:"S"},{ENTITY:e,PROPERTY:"OZON_AWAITING_CONFIRMATION",NAME:"Ожидает подтверждение",TYPE:"S"},{ENTITY:e,PROPERTY:"OZON_AWAITING_SHIPMENT",NAME:"Ожидается отгрузка",TYPE:"S"},{ENTITY:e,PROPERTY:"OZON_DELIVERED",NAME:"Доставлен",TYPE:"S"},{ENTITY:e,PROPERTY:"OZON_DELIVERING_STATUS",NAME:"Доставляется",TYPE:"S"},{ENTITY:e,PROPERTY:"OZON_CANCELED",NAME:"Отменен",TYPE:"S"},{ENTITY:e,PROPERTY:"CONTROVERSIAL",NAME:"Спорный",TYPE:"S"},{ENTITY:e,PROPERTY:"PENDING_DECISION",NAME:"Ожидает решения спора",TYPE:"S"},{ENTITY:e,PROPERTY:"OZON_API_KEY",NAME:"OZON API KEY",TYPE:"S"},{ENTITY:e,PROPERTY:"AT_THE_DRIVER",NAME:"У водителя",TYPE:"S"},{ENTITY:e,PROPERTY:"EXECUTION_FREQUENCY_NEW_TRADES",NAME:"Частота выполнения новые сделки",TYPE:"S"},{ENTITY:e,PROPERTY:"EXECUTION_FREQUENCY_STATUSES",NAME:"Частота выполнения статусы",TYPE:"S"},{ENTITY:e,PROPERTY:"EXECUTION_FREQUENCY_DELIVERIED",NAME:"Частота выполнения доставлены",TYPE:"S"},{ENTITY:e,PROPERTY:"ozon_delivering",NAME:"Частота выполнения доставляется",TYPE:"S"},{ENTITY:e,PROPERTY:"RESPONSIBLE",NAME:"Ответственный",TYPE:"S"},{ENTITY:e,PROPERTY:"PRODUCT_FIELD_CODE",NAME:"Свойство товара Артикул-ozon",TYPE:"S"},{ENTITY:e,PROPERTY:"CREATE_PRODUCT",NAME:"Создавать товар при отсутствии",TYPE:"S"},{ENTITY:e,PROPERTY:"NOTIFY_OZON_DROP",NAME:"Уведомлять при падении ozon",TYPE:"S"},{ENTITY:e,PROPERTY:"CLIENT_ID",NAME:"Клиент ID",TYPE:"S"},{ENTITY:e,PROPERTY:"CHANGE_STATUS",NAME:"Не изменять статус в Б24 пока не изменится в ozon",TYPE:"S"}];window.BX24.callMethod("entity.add",{ENTITY:e,NAME:e,ACCESS:{U1:"X",AU:"X"}}),setTimeout((function(){window.BX24.callMethod("entity.section.add",{ENTITY:e,NAME:"Разрел настроек",ACTIVE:"Y"})}),1e3),setTimeout((function(){t.forEach((function(e){window.BX24.callMethod("entity.item.property.add",e)}))}),3e3)},checkTime:function(e){var t=this.fields["".concat(e,"_TIME")],i=this.fields[e];"min"==t&&i<5&&(this.fields[e]=5)},enterOnlyNumber:function(e){var t=e.target,i=t.value,n=i.replace(/[^0-9]/gim,"");this.fields.CLIENT_ID=n}}},d=c,T=(i("729e"),i("2877")),u=i("6544"),_=i.n(u),f=i("c6a6"),N=i("8336"),I=i("62ad"),O=i("132d"),m=i("5d23"),v=i("0fd9"),p=i("b974"),R=i("1f4f"),C=i("b73d"),S=i("8654"),A=i("2a7f"),h=Object(T["a"])(d,l,o,!1,null,null,null),U=h.exports;_()(h,{VAutocomplete:f["a"],VBtn:N["a"],VCol:I["a"],VIcon:O["a"],VListItemContent:m["a"],VListItemTitle:m["b"],VRow:v["a"],VSelect:p["a"],VSimpleTable:R["a"],VSwitch:C["a"],VTextField:S["a"],VToolbarTitle:A["a"]});var D={name:"App",components:{OzoneSettings:U},data:function(){return{}}},P=D,Y=i("0798"),b=i("7496"),g=i("a523"),M=i("f6c4"),w=Object(T["a"])(P,s,a,!1,null,null,null),L=w.exports;_()(w,{VAlert:Y["a"],VApp:b["a"],VContainer:g["a"],VMain:M["a"]});var y=i("f309");n["a"].use(y["a"]);var x=new y["a"]({}),F=i("67b0");n["a"].use(F["a"]),n["a"].config.productionTip=!1,new n["a"]({vuetify:x,render:function(e){return e(L)}}).$mount("#app")},"729e":function(e,t,i){"use strict";var n=i("b1c3"),s=i.n(n);s.a},b1c3:function(e,t,i){}});
//# sourceMappingURL=app.71405b75.js.map